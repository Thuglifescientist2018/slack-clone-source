{"ast":null,"code":"import _taggedTemplateLiteral from\"D:/react-challenge-slack-clone/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";import _slicedToArray from\"D:/react-challenge-slack-clone/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";var _templateObject,_templateObject2;import'./App.css';import{useEffect,useState}from'react';import{BrowserRouter as Router,Route,Switch}from'react-router-dom';import Chat from'./components/Chat';import Login from'./components/Login';import styled from'styled-components';import Header from'./components/Header';import Sidebar from'./components/Sidebar';import db from'./firebase';import{auth,provider}from'./firebase';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),rooms=_useState2[0],setRooms=_useState2[1];var _useState3=useState(JSON.parse(localStorage.getItem('user'))),_useState4=_slicedToArray(_useState3,2),user=_useState4[0],setUser=_useState4[1];var getChannels=function getChannels(){db.collection('rooms').onSnapshot(function(snapshot){setRooms(snapshot.docs.map(function(doc){return{id:doc.id,name:doc.data().name};}));});};var signOut=function signOut(){auth.signOut().then(function(){localStorage.removeItem(\"user\");setUser(null);console.log(\"Sign out\",user);});};useEffect(function(){getChannels();},[]);console.log(\"User in App State\",user);return/*#__PURE__*/_jsx(\"div\",{className:\"App\",children:/*#__PURE__*/_jsx(Router,{children:!user?/*#__PURE__*/_jsx(Login,{setUser:setUser}):/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(Header,{signOut:signOut,user:user}),/*#__PURE__*/_jsxs(Main,{children:[/*#__PURE__*/_jsx(Sidebar,{rooms:rooms}),/*#__PURE__*/_jsxs(Switch,{children:[/*#__PURE__*/_jsx(Route,{path:\"/room/:channelId\",children:/*#__PURE__*/_jsx(Chat,{user:user})}),/*#__PURE__*/_jsx(Route,{path:\"/\",children:\"Select or add channel\"})]})]})]})})});}export default App;var Container=styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral([\"\\n  width: 100%;\\n  height: 100vh;\\n  display: grid;\\n  grid-template-rows: 38px minmax(0, 1fr);\\n\"])));var Main=styled.div(_templateObject2||(_templateObject2=_taggedTemplateLiteral([\"\\n  display: grid;\\n  grid-template-columns: 260px auto;\\n\"])));","map":{"version":3,"sources":["D:/react-challenge-slack-clone/src/App.js"],"names":["useEffect","useState","BrowserRouter","Router","Route","Switch","Chat","Login","styled","Header","Sidebar","db","auth","provider","App","rooms","setRooms","JSON","parse","localStorage","getItem","user","setUser","getChannels","collection","onSnapshot","snapshot","docs","map","doc","id","name","data","signOut","then","removeItem","console","log","Container","div","Main"],"mappings":"+VACA,MAAO,WAAP,CACA,OAASA,SAAT,CAAoBC,QAApB,KAAoC,OAApC,CACA,OAASC,aAAa,GAAIC,CAAAA,MAA1B,CAAkCC,KAAlC,CAAyCC,MAAzC,KAAuD,kBAAvD,CACA,MAAOC,CAAAA,IAAP,KAAiB,mBAAjB,CACA,MAAOC,CAAAA,KAAP,KAAkB,oBAAlB,CACA,MAAOC,CAAAA,MAAP,KAAmB,mBAAnB,CACA,MAAOC,CAAAA,MAAP,KAAmB,qBAAnB,CACA,MAAOC,CAAAA,OAAP,KAAoB,sBAApB,CACA,MAAOC,CAAAA,EAAP,KAAe,YAAf,CACA,OAAQC,IAAR,CAAcC,QAAd,KAA6B,YAA7B,C,wFAEA,QAASC,CAAAA,GAAT,EAAe,eACab,QAAQ,CAAC,EAAD,CADrB,wCACNc,KADM,eACCC,QADD,8BAEYf,QAAQ,CAACgB,IAAI,CAACC,KAAL,CAAWC,YAAY,CAACC,OAAb,CAAqB,MAArB,CAAX,CAAD,CAFpB,yCAENC,IAFM,eAECC,OAFD,eAIb,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAAO,CACzBZ,EAAE,CAACa,UAAH,CAAc,OAAd,EAAuBC,UAAvB,CAAkC,SAACC,QAAD,CAAe,CAC9CV,QAAQ,CAACU,QAAQ,CAACC,IAAT,CAAcC,GAAd,CAAkB,SAACC,GAAD,CAAS,CAClC,MAAO,CAAEC,EAAE,CAAED,GAAG,CAACC,EAAV,CAAcC,IAAI,CAAEF,GAAG,CAACG,IAAJ,GAAWD,IAA/B,CAAP,CACD,CAFQ,CAAD,CAAR,CAIG,CALN,EAOD,CARD,CASA,GAAME,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,EAAO,CACnBrB,IAAI,CAACqB,OAAL,GAAeC,IAAf,CAAoB,UAAI,CACtBf,YAAY,CAACgB,UAAb,CAAwB,MAAxB,EACAb,OAAO,CAAC,IAAD,CAAP,CACAc,OAAO,CAACC,GAAR,CAAY,UAAZ,CAAwBhB,IAAxB,EACD,CAJD,EAKH,CAND,CAODrB,SAAS,CAAC,UAAM,CACduB,WAAW,GACZ,CAFQ,CAEN,EAFM,CAAT,CAIAa,OAAO,CAACC,GAAR,CAAY,mBAAZ,CAAiChB,IAAjC,EACC,mBACE,YAAK,SAAS,CAAC,KAAf,uBACE,KAAC,MAAD,WAEI,CAACA,IAAD,cACA,KAAC,KAAD,EAAO,OAAO,CAAEC,OAAhB,EADA,cAGF,MAAC,SAAD,yBACE,KAAC,MAAD,EAAQ,OAAO,CAAEW,OAAjB,CAA0B,IAAI,CAAEZ,IAAhC,EADF,cAEE,MAAC,IAAD,yBACE,KAAC,OAAD,EAAU,KAAK,CAAEN,KAAjB,EADF,cAEE,MAAC,MAAD,yBACE,KAAC,KAAD,EAAO,IAAI,CAAC,kBAAZ,uBACE,KAAC,IAAD,EAAM,IAAI,CAAEM,IAAZ,EADF,EADF,cAIE,KAAC,KAAD,EAAO,IAAI,CAAC,GAAZ,mCAJF,GAFF,GAFF,GALF,EADF,EADF,CAyBD,CAED,cAAeP,CAAAA,GAAf,CAEA,GAAMwB,CAAAA,SAAS,CAAG9B,MAAM,CAAC+B,GAAV,mKAAf,CAOA,GAAMC,CAAAA,IAAI,CAAGhC,MAAM,CAAC+B,GAAV,6HAAV","sourcesContent":["\r\nimport './App.css';\r\nimport { useEffect, useState } from 'react';\r\nimport { BrowserRouter as Router, Route, Switch } from 'react-router-dom';\r\nimport Chat from './components/Chat'\r\nimport Login from './components/Login';\r\nimport styled from 'styled-components';\r\nimport Header from './components/Header';\r\nimport Sidebar from './components/Sidebar';\r\nimport db from './firebase';\r\nimport {auth, provider} from './firebase';\r\n\r\nfunction App() {\r\n  const [rooms, setRooms] = useState([]);\r\n  const [user , setUser] = useState(JSON.parse(localStorage.getItem('user')));\r\n\r\n  const getChannels = () =>  {\r\n    db.collection('rooms').onSnapshot((snapshot) =>  {\r\n       setRooms(snapshot.docs.map((doc) => {\r\n         return { id: doc.id, name: doc.data().name}\r\n       }\r\n       \r\n       ))})\r\n    \r\n  }\r\n  const signOut = () =>  {\r\n      auth.signOut().then(()=>{\r\n        localStorage.removeItem(\"user\");\r\n        setUser(null);\r\n        console.log(\"Sign out\", user);\r\n      })\r\n  }\r\n useEffect(() => {\r\n   getChannels()\r\n }, [])\r\n\r\n console.log(\"User in App State\", user);\r\n  return (\r\n    <div className=\"App\">\r\n      <Router>\r\n        {\r\n          !user ?\r\n          <Login setUser={setUser}/> :\r\n\r\n        <Container>\r\n          <Header signOut={signOut} user={user} />\r\n          <Main>\r\n            <Sidebar  rooms={rooms} /> \r\n            <Switch>\r\n              <Route path=\"/room/:channelId\">\r\n                <Chat user={user} />\r\n              </Route>\r\n              <Route path=\"/\">\r\n                Select or add channel\r\n              </Route>\r\n            </Switch>\r\n          </Main>\r\n        </Container>\r\n        }\r\n      </Router>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default App;\r\n\r\nconst Container = styled.div`\r\n  width: 100%;\r\n  height: 100vh;\r\n  display: grid;\r\n  grid-template-rows: 38px minmax(0, 1fr);\r\n`\r\n\r\nconst Main = styled.div`\r\n  display: grid;\r\n  grid-template-columns: 260px auto;\r\n`\r\n"]},"metadata":{},"sourceType":"module"}